# 全页面截图 Chrome 扩展

一个简单的Chrome扩展，允许用户通过快捷键Ctrl+P将整个网页捕获为长截图，并自动保存到D:\test或其他自定义目录。

## 功能

- 使用Ctrl+P快捷键触发截图功能
- 通过扩展图标点击打开弹出窗口，也可以点击按钮截图
- 自动滚动页面，捕获每个部分的内容
- 智能合并多个截图，生成一个完整的长图
- 自动保存到指定目录，无需手动确认
- 自动隐藏固定定位元素，避免重复出现在截图中

## 使用前准备

1. 确保D:\test目录存在且具有写入权限
   - 您可以运行 `node install.js` 来自动检查和创建目录
   - 或者手动创建目录: `mkdir D:\test`

## 安装方法

1. 下载或克隆此仓库到本地
2. 打开Chrome浏览器，进入扩展管理页面 (chrome://extensions/)
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"按钮
5. 选择本项目的文件夹

## 使用方法

1. 在任何网页上按下Ctrl+P快捷键或点击扩展图标中的"捕获整页长截图"按钮
2. 等待扩展自动滚动页面并捕获各部分
3. 截图完成后，合并的长图将自动保存到设置的目录中（默认为D:\test）
4. 系统将显示通知，提示截图已保存

## 截图过程说明

1. 开始截图时，扩展会自动记录您当前的滚动位置
2. 然后滚动到页面顶部，开始截取第一部分
3. 持续自动滚动并截取每个部分，直到整个页面都被捕获
4. 使用Canvas将各部分拼接成一个无缝的长图
5. 截图完成后会自动恢复您之前的滚动位置

## 技术实现

本扩展使用以下技术实现长截图功能：

1. 使用chrome.tabs.captureVisibleTab API捕获当前可见区域
2. 使用programmatic scrolling（程序化滚动）来捕获整个页面
3. 使用OffscreenCanvas处理图像合并
4. 通过chrome.downloads API自动保存截图文件
5. 使用动态元素隐藏技术避免固定定位元素重复出现

## 高级功能

- **智能元素处理**: 自动检测并隐藏固定定位(fixed/sticky)元素，避免在不同截图部分重复出现
- **自动恢复**: 截图完成后自动恢复页面原始状态
- **错误处理**: 在截图过程中断时提供干净的错误恢复机制

## 注意事项

- 此扩展会覆盖Chrome默认的Ctrl+P打印快捷键
- 截图过程中请勿手动滚动或切换页面，以确保截图质量
- 生成长截图可能需要一些时间，特别是对于非常长的页面
- 一些使用复杂动态效果的网页可能无法完美截图

## 图标文件

在正式使用前，请将以下占位图标替换为实际的图标文件：
- images/icon16.png (16x16像素)
- images/icon48.png (48x48像素)
- images/icon128.png (128x128像素) 